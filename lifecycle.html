<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <title>Math Element Hooks Demo</title>
    <script src="math_element_lifecycle.js"></script>
</head>
<body>
    <p>A paragraph</p>
    <p>And a paragraph with some inline <math display="inline">
  <mrow>
    <mi>x</mi>
    <mo>=</mo>
    <mfrac>
      <mrow>
        <mo>&#x2212;</mo>
        <mi>b</mi>
        <mo>&#xB1;</mo>
        <msqrt>
          <mrow>
            <msup>
              <mi>b</mi>
              <mn>2</mn>
            </msup>
            <mo>&#x2212;</mo>
            <mn>4</mn>
            <mi>a</mi>
            <mi>c</mi>
          </mrow>
        </msqrt>
      </mrow>
      <mrow>
        <mn>2</mn>
        <mi>a</mi>
      </mrow>
    </mfrac>
  </mrow>
</math> MathML.</p>
<p>Then some block style MathML:</p>
<math xmlns="http://www.w3.org/1998/Math/MathML" display="block">
  <mrow>
    <mi>&#x3C3;</mi>
    <mo>=</mo>
    <msqrt>
      <mrow>
        <mfrac>
          <mrow>
            <mn>1</mn>
          </mrow>
          <mrow>
            <mi>N</mi>
          </mrow>
        </mfrac>
        <mstyle displaystyle="true">
          <mrow>
            <munderover>
              <mrow>
                <mo>&#x2211;</mo>
              </mrow>
              <mrow>
                <mi>i</mi>
                <mo>=</mo>
                <mn>1</mn>
              </mrow>
              <mrow>
                <mi>N</mi>
              </mrow>
            </munderover>
            <mrow>
              <msup>
                <mrow>
                  <mo stretchy="false">(</mo>
                  <msub>
                    <mrow>
                      <mi>x</mi>
                    </mrow>
                    <mrow>
                      <mi>i</mi>
                    </mrow>
                  </msub>
                  <mo>&#x2212;</mo>
                  <mi>&#x3BC;</mi>
                  <mo stretchy="false">)</mo>
                </mrow>
                <mrow>
                  <mn>2</mn>
                </mrow>
              </msup>
            </mrow>
          </mrow>
        </mstyle>
      </mrow>
    </msqrt>
    <mo>.</mo>
  </mrow>
</math>
<p>And this is <em>the end</em>.</p>

<script>
(function () {

    window.MathElementLifecycle.register({
        created: function (node) {
            console.log('created', node);
        },
        attached: function (node) {
            console.log('attached', node);
        },
        detached: function (node) {
            console.log('detached', node);
        }
    });

    window.onload = function () {
        var e = document.createElementNS(window.MathElementLifecycle.MML, 'math');
        document.body.appendChild(e);

        e = document.createElement('div');
        e.innerHTML = '<span><math display="inline"><mi>x</mi></math></span>';
        document.body.appendChild(e);
    }

})();
</script>
</body>
</html>
